{
  "name": "Blocks templates default",
  "type": "plugin",
  "plugin_slug": "soyuz-blocks-templates-default",
  "events": [
    {
      "name": "Insert block",
      "slug": "soyuz-insert-block",
      "plugin":"soyuz-blocks-templates-default",
      "method": "WRITE",
      "actions":[
        {
                "set": {
                  "source": "insert_block_target_slug",
                  "value": "{this.parent.source_slug}"
                }
              },
              {
                "get_collection": {
                  "source": "pages",
                  "query_variables": {
                    "slug": "{this.output.0}"
                  }
                }
              },
              {
                "set": {
                  "source": "insert_block",
                  "value": "{this.output.1.0.blocks.0.innerBlocks}"
                }
              },
              {
                "set": {
                  "source": "insert_block.0.attrs.source",
                  "value": "{store.native_click.source}"
                }
              },
              {
                "set": {
                  "source": "insert_block.0.attrs.source_slug",
                  "value": "{store.native_click.source_slug}"
                }
              },
              {
                "set": {
                  "source": "insert_block.0.attrs.source_path",
                  "value": "{store.native_click.__blockPath}"
                }
              },
              {
                "set_blocks": {
                  "value": "{store.insert_block}"
                }
              },
              {
                "routerQuery": {
                  "tick": "{math.random(10)}"
                }
              }
      ]
    }
  ],
  "pages": [
    {
      "name": "Button 1",
      "slug": "button-1-tpl",
      "plugin_slug": "soyuz-blocks-templates-default",
      "type": "tpl",
      "category": "buttons",
      "blocks": [
        {
          "blockName": "core/button",
          "attrs": {
            "className": "",
            "actions": [
              {"run_event":"soyuz-insert-block"}
            ]
          },
          "innerBlocks": [
            {
              "blockName": "core/button",
              "attrs": {
                "className": "-center -pad-xs -hvr-invert -b -b-light-gray",
                "content": "Button 1"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Button 2",
      "slug": "button-2-tpl",
      "plugin_slug": "soyuz-blocks-templates-default",
      "type": "tpl",
      "category": "buttons",
      "blocks": [
        {
          "blockName": "core/button",
          "attrs": {
            "className": "",
            "actions": [
              {"run_event":"soyuz-insert-block"}
            ]
          },
          "innerBlocks": [
            {
              "blockName": "core/button",
              "attrs": {
                "className": "-btn-bg -center -pad-xs -hvr-invert -b -b-light-gray",
                "content": "Button 2"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Button 3",
      "slug": "button-3-tpl",
      "plugin_slug": "soyuz-blocks-templates-default",
      "type": "tpl",
      "category": "buttons",
      "blocks": [
        {
          "blockName": "core/button",
          "attrs": {
            "className": "",
            "actions": [
              {"run_event":"soyuz-insert-block"}
            ]
          },
          "innerBlocks": [
            {
              "blockName": "core/button",
              "attrs": {
                "className": "-center -pad-xs -b-s -bg-c-primary -hvr-brightness -color-white",
                "content": "Button 3"
              }
            }
          ]
        }
      ]
    }
  ],
  "blocks": []
}